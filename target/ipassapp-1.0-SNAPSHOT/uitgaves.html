<!DOCTYPE html>
<html>
<head>    <!-- Standard Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <!-- Site Properties -->
    <title>Uitgaves</title>

    <link rel="stylesheet" type="text/css" href="semantic/out/components/reset.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/site.css">

    <link rel="stylesheet" type="text/css" href="semantic/out/components/container.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/grid.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/header.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/image.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/menu.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/table.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/modal.css">


    <link rel="stylesheet" type="text/css" href="semantic/out/components/divider.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/button.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/form.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/input.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/list.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/segment.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/dropdown.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/icon.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/dimmer.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/transition.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/dropdown.css">
    <link rel="stylesheet" type="text/css" href="semantic/out/components/message.css">
    <link rel="stylesheet" type="text/css" href="assets/css/dashboard.css">

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="semantic/out/components/dropdown.js"></script>
    <script src="semantic/out/components/modal.js"></script>
    <script src="semantic/out/components/transition.js"></script>
    <script src="semantic/out/components/dimmer.js"></script>
    <script src="assets/js/uitgaves.js"></script>
    <style type="text/css">

        .hidden.menu {
            display: none;
        }

        .masthead.segment {
            min-height: 625px;
            padding: 1em 0em;
        }

        .masthead .logo.item img {
            margin-right: 1em;
        }

        .masthead .ui.menu .ui.button {
            margin-left: 0.5em;
        }

        .masthead h1.ui.header {
            margin-top: 3em;
            margin-bottom: 0em;
            font-size: 4em;
            font-weight: normal;
        }

        .masthead h2 {
            font-size: 1.7em;
            font-weight: normal;
        }

        .ui.vertical.stripe {
            padding: 8em 0em;
        }

        .ui.vertical.stripe h3 {
            font-size: 2em;
        }

        .ui.vertical.stripe .button + h3,
        .ui.vertical.stripe p + h3 {
            margin-top: 3em;
        }

        .ui.vertical.stripe .floated.image {
            clear: both;
        }

        .ui.vertical.stripe p {
            font-size: 1.33em;
        }

        .ui.vertical.stripe .horizontal.divider {
            margin: 3em 0em;
        }

        .quote.stripe.segment {
            padding: 0em;
        }

        .quote.stripe.segment .grid .column {
            padding-top: 5em;
            padding-bottom: 5em;
        }

        .footer.segment {
            padding: 5em 0em;
        }

        .secondary.pointing.menu .toc.item {
            display: none;
        }

        @media only screen and (max-width: 700px) {
            .ui.fixed.menu {
                display: none !important;
            }

            .secondary.pointing.menu .item,
            .secondary.pointing.menu .menu {
                display: none;
            }

            .secondary.pointing.menu .toc.item {
                display: block;
            }

            .masthead.segment {
                min-height: 350px;
            }

            .masthead h1.ui.header {
                font-size: 2em;
                margin-top: 1.5em;
            }

            .masthead h2 {
                margin-top: 0.5em;
                font-size: 1.5em;
            }
        }


    </style>
    <style type="text/css">
        body {
            background-color: #FFFFFF;
        }

        .ui.menu .item img.logo {
            margin-right: 1.5em;
        }

        h2 {
            color: black;
        }

        #header {
            background-image: url(assets/img/nospang.png);
            background-repeat: no-repeat;
            background-size: cover;
            background-attachment: fixed;
            background-position: 0% 133%;
        }

        .ui.footer.segment {
            margin: 5em 0em 0em;
            padding: 5em 0em;
        }
    </style>
    <style type="text/css">
        :root .ch[onclick="ga(this,event)"],
        :root .mw > #rcnt > #center_col > #taw > .c,
        :root .mw > #rcnt > #center_col > #taw > #tvcap > .c,
        :root .ad.super,
        :root #content > #right > .dose > .dosesingle,
        :root #content > #center > .dose > .dosesingle,
        :root #carbonads-container,
        :root .carbonad {
            display: none !important;
        }</style>
    <script>
        $(document).ready(function () {
            if (sessionStorage.getItem("sessionToken")) {

            } else {
                window.location.href = "/index.html";
            }
        });
    </script>
</head>
<body>

<div class="ui attached stackable menu">
    <div class="ui container">
        <a href="dashboard.html" class="item">
            <i class="home icon"></i> Home
        </a>
        <a class="item">
            <i class="grid layout icon"></i> Browse
        </a>
        <a class="item">
            <i class="mail icon"></i> Messages
        </a>
    </div>
</div>
<div id="header" class="ui inverted vertical masthead center aligned segment">
    <div class="ui text container">
        <h1 class="ui header">
            Welkom bij jouw Dashboard
        </h1>
        <h2>Dit is jouw hub voor al je informatie over jouw persoonlijke geldzaken.</h2>
    </div>
</div>
<div class="ui vertical stripe segment">
    <div class="ui equal width stackable internally celled grid">
        <div class="center aligned row">
            <div class="column">
                <div class="ui header">
                    Uitgave Toevoegen
                </div>
                <form id="addUitgaveForm" method="post" class="ui large form">
                    <div class="field">
                        <div class="ui left icon input">
                            <i class="euro icon"></i>
                            <input type="number" name="bedrag" placeholder="Bedrag">
                        </div>
                    </div>
                    <div class="field">
                        <div class="ui left icon input">
                            <i class="dropdown outline icon"></i>
                            <select class="ui dropdown" name="soort_uitgave">
                                <option value="weekelijks">Weekelijks</option>
                                <option value="maandelijks">Maandelijks</option>
                                <option value="jaarlijks">Jaarlijks</option>
                            </select>
                        </div>
                    </div>
                    <div class="field">
                        <div class="ui left icon input">
                            <i class="calendar icon"></i>
                            <input type="date" name="uitgave_datum" placeholder="DD-MM-YYYY">
                        </div>
                    </div>
                    <div class="field">
                        <div class="ui left icon input">
                            <i class="comment icon"></i>
                            <input type="text" name="beschrijving" placeholder="beschrijving">
                        </div>
                    </div>
                    <div class="ui equal width stackable internally celled grid checkbox field">
                        <div class="column">
                            <i class="options icon"></i>
                            <input id="betalingsregeling" type="checkbox" name="betalingsregeling"
                                   onchange="toggleDisplay(this)">
                            <label for="betalingsregeling">Is dit een betalingsregeling?</label>
                        </div>
                        <div class="column">
                            <i class="options icon"></i>
                            <input id="tijdelijke_uitgave" type="checkbox" name="tijdelijke_uitgave"
                                   onchange="toggleDisplay(this)">
                            <label for="tijdelijke_uitgave">Is dit een tijdelijke uitgave?</label>
                        </div>
                    </div>
                    <div class="betalingsregeling">
                        <div class="field">
                            <div class="ui left icon input">
                                <i class="hashtag icon"></i>
                                <input type="number" name="kenmerknummer" placeholder="Kenmerknummer">
                            </div>
                        </div>
                        <div class="field">
                            <div class="ui left icon input">
                                <i class="hashtag icon"></i>
                                <input type="number" name="aantal_maanden" placeholder="Aantal maanden">
                            </div>
                        </div>
                    </div>
                    <div class="tijdelijke_uitgave">
                        <div class="field">
                            <div class="ui left icon input">
                                <i class="linkify icon"></i>
                                <input type="url" name="link"
                                       placeholder="Tijdelijke Uitgave url (bijv. webshop artikel)">
                            </div>
                        </div>
                        <div class="field">
                            <div class="ui left icon input">
                                <i class="image icon"></i>
                                <input type="url" name="afbeelding" placeholder="afbeelding url">
                            </div>
                        </div>
                    </div>


                    <input id="user_id" type="hidden" name="user_id" hidden>
                    <input type="submit" value="Register" class="ui middle teal submit button">
                </form>
            </div>
            <div class="column">
                <h2 class="ui header">
                    <i class="euro icon"></i>
                    <div class="content">
                        <div class="sub header">Het totaal uitgave bedrag is:</div>
                        <span id="totalUitgave"></span>
                    </div>
                </h2>
            </div>
        </div>
    </div>
    <div id="message" class="ui hidden floating success message">
            <i class="close icon"></i>
            <div class="header">
                Uitgave succesvol toegevoegt
            </div>
            <p>U kunt de uitgave zien op u dashboard</p>
        </div>
</div>
<script>
    $(document).ready(
        $(".betalingsregeling, .tijdelijke_uitgave").hide()
    );
    function toggleDisplay(element) {
        if(element.checked){
            $("."+element.id).show();
        }
        else {
            $("."+element.id).hide();
        }
    }
    $("#addUitgaveForm").on("submit", function (e) {
        e.preventDefault();
        var userid = sessionStorage.getItem("sessionToken");
//        $.post({
//            url: "/restservices/dashboard/add/uitgave/" + userid,
//            data: $(this).serialize(),
//            success: function (data) {
//                sessionStorage.setItem("sessionToken", data);
//                window.location.href = "/dashboard.html";
//            }
//        });
        var object = {};
        $('#user_id').val(userid);
        var inputs = $("#addUitgaveForm input");
        var dropdown = $("#addUitgaveForm select");
        var tijdelijke_uitgave = $("input#tijdelijke_uitgave").is(':checked');
        var betalingsregeling = $("input#betalingsregeling").is(':checked');

        $.each(inputs, function (index, input) {
            object["" + input.name + ""] = input.value;
        });
        object["" + dropdown[0].name + ""] = dropdown[0].value;
        object["tijdelijke_uitgave"] = tijdelijke_uitgave;
        object["betalingsregeling"] = betalingsregeling;
        console.log(object);
        $.ajax({
            url: "/restservices/dashboard/uitgave/add/",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify(object),
            success: function (result) {
                $('#message').show();
                $('.message .close')
                    .on('click', function() {
                        $(this)
                            .closest('.message')
                            .transition('fade')
                        ;
                    })
                ;
                loadTotalUitgaves()
            }
        });
    });
</script>
</body>
</html>